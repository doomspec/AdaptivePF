from GA._ga_selector import GACorrelationQsubsetSelector
from GA._brute_force import _brute_force
import networkx as nx
import itertools
import numpy as np
import time


def generate_random_graph(size=10):
    nodes = [str(x) for x in range(size)]
    g = nx.Graph()
    combines = itertools.combinations(nodes, 2)
    for item in combines:
        from_node, to_node = item
        weight = np.random.random()
        g.add_edge(from_node, to_node, weight=weight)
    return g


mi = [[0.0, 0.0538758450985564, 0.02614562320786966, 0.02614562320786966, 0.008245482299012799, 0.007864536298169127,
       0.012310588191778209, 0.012310588191778209],
      [0.0538758450985564, 0.0, 0.02614562320786966, 0.02614562320786966, 0.007864536298169127, 0.008245482299012799,
       0.012310588191778209, 0.012310588191778209],
      [0.02614562320786966, 0.02614562320786966, 0.0, 0.01937679910061013, 1.4832056870604793e-05,
       1.4832056870604793e-05, 0.0003230449833626914, 0.0054519507555633034],
      [0.02614562320786966, 0.02614562320786966, 0.01937679910061013, 0.0, 1.4832056870604793e-05,
       1.4832056870604793e-05, 0.0054519507555633034, 0.0003230449833626914],
      [0.008245482299012799, 0.007864536298169127, 1.4832056870604793e-05, 1.4832056870604793e-05, 0.0,
       0.012592316707630283, 7.282117723543535e-06, 7.282117723543535e-06],
      [0.007864536298169127, 0.008245482299012799, 1.4832056870604793e-05, 1.4832056870604793e-05, 0.012592316707630283,
       0.0, 7.282117723543535e-06, 7.282117723543535e-06],
      [0.012310588191778209, 0.012310588191778209, 0.0003230449833626914, 0.0054519507555633034, 7.282117723543535e-06,
       7.282117723543535e-06, 0.0, 0.005779662736367819],
      [0.012310588191778209, 0.012310588191778209, 0.0054519507555633034, 0.0003230449833626914, 7.282117723543535e-06,
       7.282117723543535e-06, 0.005779662736367819, 0.0]]
mi = np.array(mi)
mi *= 1e2
g = nx.Graph(mi)
ga = GACorrelationQsubsetSelector(g)
ga.run(iteration=100)
res = ga.get_result()
for term in res:
    print(term.fitness, term.genes)
